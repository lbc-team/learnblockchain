# EOS 入门第二篇 - 技术原理

标签（空格分隔）： 文章分享

---

作者：Ashton
[原文链接](https://www.jianshu.com/p/e46cc037a6ef)

### 0x01 总体架构

![eos模块机构图](https://img.learnblockchain.cn/2019/05/eosYH.png)

如上图所示，总体上 EOS 主要由 keosd, cleos. nodeos 三大运行时组件构成。
keosd 可以认为是个密钥管理器，用来管理和 EOS 账户相关的公私钥。
cleos 客户端命令行交互组件，用于解析用户命令，根据具体命令请求调用相应的接口，例如查看区块信息、操作钱包等等。
nodeos 是 EOS 核心进程，EOS 大部分的功能都是在 nodeos 中进行。我们可以使用插件来配置 nodeos 去执行各种功能。 p2p 网络、合约代码调度以及区块链数据持久化等大部分区块链核心功能都被放在了 nodeos 中。 对于开发人员来说，nodeos 也足够用来建立一个单节点区块链网络。
用户在和 eos 进行交互时，通常来说都是通过 cleos 来发送指令，根据具体情况将请求转发到 keosd 还是 nodes，由 keosd 进行账户创建，交易签名等操作。

---

### 0x02 账户体系

账户体系是 EOS 中的 亮点之一，实 现了基于角色的权限 管理和账户恢复功能 ，使得用户可以灵活地以一种组织化的方式管理账户 ，并最大化保证资产的安全性。

1. 基于角色的多层级账户体系
常见区块链项目的账户是一对公私钥，账户名就是公钥，而 EOS 中的账户名 是 由 用户自定义的 12 位可读标识符组成，且一般一个账户下面包含多对公私钥，每对可以 自定义拥有不同的权限 。 遇过权限配置可实现该账户只被个体拥有或者被一个组织控制(即多个个体共同拥有)， 该账户是传统公钥所代表 的单一权限的更高层次抽象集合 。 对于常见的区块链项目而言，一般由于只有一对公私钥，因此项目的代币 会直接 放在公钥里， 如 果私钥被盗取代币便可直接转走 。 而 在 EOS 中， 代币 是放在账户里 的，公钥里面放的是带权 重 的钥匙，转走账户里面的代币 需要每个 拥有转账权限的钥 匙的权重之和达到设定的阁值才可进行 。 EOS 上的所有交易行为都是通过账户来完成 的，通过账户执行任意操作时 ， EOS 系统 首先会验证操作者是否拥有足够的权限，验证通过该操作才能生效 。
EOS 中，每个账户刚创建时 一般 由个体拥 有，通过单一公私钥 便能进行所有操
作，后续可根据需要通过权限配置将该账户扩展成组织账户，由多对公私钥(即多个 主体)共同控制，甚至可为组织外部个体或组织分配部分操作权 限，从而实现极其灵活的组织管理方式 。
2. 账户权限管理
EOS 中任意账 户 都自带两个 原生权限 : owner 和 active 权限 。 owner 即代 表账户所有权，该权限可进行所有操作，包括更改 owner 权限，可由 一 对或多对 EOS 公私钥或另一账户的某权限实现权限控制 。 因此，代表着 owner 权限的 EOS 公私钥是 最重要 的，必须冷储藏 。 active 即活跃权限 ， 能进行除更改 owner 权限以外的所有操作，也 是通过一对或多对 EOS 公私钥或另一账户的某权限实现权限控制的 。
3. 密铜丢失或被盗后的恢复
EOS 允许恢复被盗窃的密钥，这在比特币和以太坊上是不可能的 。 在比特币和以 太坊上一旦密钥丢失那么整个账户也将随之丢失 。 EOS 系统软件为用户提供了密钥被 盗时恢复其账户控制的方法 。 账户所有者可以使用过去 30 天内活跃的任何其批准的账 户恢复合作伙伴的密钥，并重置账户上的所有者密钥 。 没有账户所有者的配合，账户恢复合作伙伴无法重置账户的控制权 。




